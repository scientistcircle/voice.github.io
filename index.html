<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Pengumuman Masjid - Sleman</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: { extend: { colors: { darkBg: '#0f172a', darkCard: '#1e293b' } } }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; transition: background 0.3s ease; }
        .rec-shape { width: 12px; height: 12px; background-color: #ef4444; border-radius: 50%; display: inline-block; margin-right: 8px; }
        .recording-active { animation: pulse-red 1.5s infinite; background: rgba(239, 68, 68, 0.2) !important; border-color: #ef4444 !important; }
        @keyframes pulse-red { 0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4); } 100% { box-shadow: 0 0 0 15px rgba(239, 68, 68, 0); } }
        .btn-recorded { background: rgba(16, 185, 129, 0.1) !important; border-color: #10b981 !important; color: #059669 !important; }
    </style>
</head>
<body class="bg-slate-100 dark:bg-darkBg text-slate-900 dark:text-slate-100 p-4 md:p-8">

    <div class="max-w-6xl mx-auto">
        <div class="flex justify-between items-center mb-8">
            <div>
                <h1 class="text-2xl font-extrabold tracking-tight text-emerald-600 dark:text-emerald-400">Masjid Management System</h1>
                <p class="text-sm text-slate-500 dark:text-slate-400 font-medium">Wilayah Sleman, DIY</p>
            </div>
            <button onclick="toggleDarkMode()" class="p-3 bg-white dark:bg-darkCard rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700">
                <span id="dark-icon">üåô</span>
            </button>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
            <div class="bg-white dark:bg-darkCard p-6 rounded-[28px] shadow-sm flex flex-col items-center justify-center border border-slate-200 dark:border-slate-700 text-center">
                <h3 id="realtime-day" class="text-xs font-bold uppercase text-slate-400 mb-1">---</h3>
                <h1 id="realtime-clock" class="text-5xl font-black tracking-tighter">00:00:00</h1>
                <p class="text-[10px] text-slate-400 mt-2 font-bold uppercase tracking-widest">WIB</p>
            </div>
            <div class="lg:col-span-2 bg-white dark:bg-darkCard p-6 rounded-[28px] shadow-sm border border-slate-200 dark:border-slate-700">
                <h3 class="font-bold text-slate-800 dark:text-slate-200 mb-4 text-sm flex items-center gap-2">
                    <svg class="w-4 h-4 text-emerald-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    Jadwal Sholat Hari Ini
                </h3>
                <div class="grid grid-cols-5 gap-3" id="sholat-container"></div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-10">
            <div class="lg:col-span-2 bg-slate-900 text-white p-8 rounded-[32px] shadow-2xl relative overflow-hidden border-b-4 border-emerald-500">
                <div class="relative z-10">
                    <div class="flex flex-wrap justify-between items-start gap-4 mb-6">
                        <div class="w-full sm:w-auto">
                            <span class="text-[10px] bg-emerald-500 text-white px-3 py-1 rounded-full font-bold uppercase tracking-widest">Digital Murottal Player</span>
                            <h2 id="now-playing" class="text-xl font-bold mt-2 truncate text-emerald-100">Ready to play...</h2>
                        </div>
                        
                        <div class="flex flex-wrap gap-2 w-full sm:w-auto">
                            <select id="qari-select" class="bg-white/10 border border-white/20 rounded-xl px-3 py-2 text-[11px] outline-none">
                                <option value="server8.mp3quran.net/afs">Mishary Alafasy</option>
                                <option value="server11.mp3quran.net/yasser">Yasser Al-Dosari</option>
                                <option value="server12.mp3quran.net/maher">Maher Al-Muaiqly</option>
                                <option value="server7.mp3quran.net/basit">Abdul Basit</option>
                            </select>
                            <select id="surah-select" class="bg-white/10 border border-white/20 rounded-xl px-3 py-2 text-[11px] outline-none max-w-[150px]">
                                </select>
                            <button onclick="loadFromMp3Quran()" class="bg-emerald-600 hover:bg-emerald-500 px-4 py-2 rounded-xl text-[11px] font-bold transition">PLAY</button>
                        </div>
                    </div>
                    
                    <div class="w-full bg-white/10 h-1.5 rounded-full mb-2" id="progress-container">
                        <div id="progress-bar" class="bg-emerald-400 h-full rounded-full w-0 transition-all"></div>
                    </div>
                    <div class="flex justify-between text-[10px] font-mono text-white/40 mb-8">
                        <span id="time-current">00:00</span>
                        <span id="time-total">00:00</span>
                    </div>

                    <div class="flex items-center justify-center gap-12">
                        <button onclick="rewindAudio()" class="hover:scale-110 transition opacity-70"><svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24"><path d="M11 18V6l-8.5 6 8.5 6zm.5-6l8.5 6V6l-8.5 6z"/></svg></button>
                        <button onclick="toggleUniversalPlayer()" id="btn-master-play" class="w-16 h-16 bg-white text-slate-900 rounded-full flex items-center justify-center hover:scale-110 transition shadow-xl">
                            <svg id="play-icon" class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                        </button>
                        <button onclick="forwardAudio()" class="hover:scale-110 transition opacity-70"><svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24"><path d="M4 18l8.5-6L4 6v12zm9-12v12l8.5-6L13 6z"/></svg></button>
                    </div>
                </div>
            </div>

            <div class="bg-white dark:bg-darkCard p-8 rounded-[32px] border border-slate-200 dark:border-slate-700 shadow-sm flex flex-col justify-center">
                <h3 class="font-bold text-sm mb-3 text-slate-400 uppercase tracking-tighter">Gain Rekaman (Studio)</h3>
                <input type="range" id="gain-control" min="0.5" max="2.0" step="0.1" value="1.2" class="w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-emerald-500">
                <div class="flex justify-between text-[9px] mt-4 font-black text-emerald-600 uppercase italic">
                    <span>Compressor: ON</span>
                    <span>1.2x Boost</span>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 pb-24">
            <div class="bg-white dark:bg-darkCard p-8 rounded-[28px] border border-slate-200 dark:border-slate-700 shadow-sm">
                <div class="flex items-center gap-4 mb-6 text-emerald-600"><div class="text-2xl">üåÖ</div><h2 class="text-xl font-bold">Sesi Subuh</h2></div>
                <div class="flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl">
                    <span class="text-sm font-bold">Petugas</span>
                    <div class="flex gap-2">
                        <button onmousedown="handleStart('subuh')" onmouseup="handleStop()" id="btn-rec-subuh" class="flex items-center p-3 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl font-bold text-xs uppercase italic"><span class="rec-shape"></span> Rec</button>
                        <button onclick="playAnnouncement(1)" class="px-5 py-2 bg-slate-900 dark:bg-emerald-600 text-white rounded-xl font-bold text-sm">Siarkan</button>
                    </div>
                </div>
            </div>

            <div class="bg-white dark:bg-darkCard p-8 rounded-[28px] border border-slate-200 dark:border-slate-700 shadow-sm">
                <div class="flex items-center gap-4 mb-6 text-sky-600"><div class="text-2xl">‚òÄÔ∏è</div><h2 class="text-xl font-bold">Sesi Dzuhur</h2></div>
                <div class="grid grid-cols-2 gap-4 mb-4">
                    <button onmousedown="handleStart('dzuhur-q')" onmouseup="handleStop()" id="btn-rec-dzuhur-q" class="flex items-center justify-center p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl font-bold text-[10px] uppercase italic"><span class="rec-shape"></span> Qabliyah</button>
                    <button onmousedown="handleStart('dzuhur-b')" onmouseup="handleStop()" id="btn-rec-dzuhur-b" class="flex items-center justify-center p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl font-bold text-[10px] uppercase italic"><span class="rec-shape"></span> Ba'diyah</button>
                </div>
                <button onclick="playAnnouncement(2)" class="w-full py-3 bg-sky-600 text-white rounded-2xl font-bold">Siarkan Dzuhur</button>
            </div>

            <div class="bg-white dark:bg-darkCard p-8 rounded-[28px] border border-slate-200 dark:border-slate-700 shadow-sm">
                <div class="flex items-center gap-4 mb-6 text-orange-600"><div class="text-2xl">üå•Ô∏è</div><h2 class="text-xl font-bold">Sesi Ashar</h2></div>
                <div class="grid grid-cols-2 gap-4 mb-4">
                    <button onmousedown="handleStart('ashar-1')" onmouseup="handleStop()" id="btn-rec-ashar-1" class="flex items-center justify-center p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl font-bold text-[10px] uppercase italic"><span class="rec-shape"></span> Lantai 1</button>
                    <button onmousedown="handleStart('ashar-2')" onmouseup="handleStop()" id="btn-rec-ashar-2" class="flex items-center justify-center p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl font-bold text-[10px] uppercase italic"><span class="rec-shape"></span> Lantai 2</button>
                </div>
                <button onclick="playAnnouncement(3)" class="w-full py-3 bg-orange-600 text-white rounded-2xl font-bold">Siarkan Ashar</button>
            </div>

            <div class="bg-white dark:bg-darkCard p-8 rounded-[28px] border border-slate-200 dark:border-slate-700 shadow-sm">
                <div class="flex items-center gap-4 mb-6 text-purple-600"><div class="text-2xl">‚ú®</div><h2 class="text-xl font-bold">Sesi Hajat</h2></div>
                <div class="grid grid-cols-2 gap-4 mb-4">
                    <button onmousedown="handleStart('hajat-1')" onmouseup="handleStop()" id="btn-rec-hajat-1" class="flex items-center justify-center p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl font-bold text-[10px] uppercase italic"><span class="rec-shape"></span> Hajat 1</button>
                    <button onmousedown="handleStart('hajat-2')" onmouseup="handleStop()" id="btn-rec-hajat-2" class="flex items-center justify-center p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl font-bold text-[10px] uppercase italic"><span class="rec-shape"></span> Hajat 2</button>
                </div>
                <button onclick="playAnnouncement(4)" class="w-full py-3 bg-purple-600 text-white rounded-2xl font-bold">Siarkan Hajat</button>
            </div>

            <div class="bg-white dark:bg-darkCard p-8 rounded-[28px] border border-slate-200 dark:border-slate-700 shadow-sm md:col-span-2">
                <div class="flex items-center gap-4 mb-6 text-indigo-500"><div class="text-2xl">üåô</div><h2 class="text-xl font-bold">Sesi Isya</h2></div>
                <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-4">
                    <button onmousedown="handleStart('isya-q1')" onmouseup="handleStop()" id="btn-rec-isya-q1" class="flex items-center justify-center p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl font-bold text-[9px] uppercase italic"><span class="rec-shape"></span> Qab. Lt 1</button>
                    <button onmousedown="handleStart('isya-q2')" onmouseup="handleStop()" id="btn-rec-isya-q2" class="flex items-center justify-center p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl font-bold text-[9px] uppercase italic"><span class="rec-shape"></span> Qab. Lt 2</button>
                    <button onmousedown="handleStart('isya-b1')" onmouseup="handleStop()" id="btn-rec-isya-b1" class="flex items-center justify-center p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl font-bold text-[9px] uppercase italic"><span class="rec-shape"></span> Ba'd. Lt 1</button>
                    <button onmousedown="handleStart('isya-b2')" onmouseup="handleStop()" id="btn-rec-isya-b2" class="flex items-center justify-center p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl font-bold text-[9px] uppercase italic"><span class="rec-shape"></span> Ba'd. Lt 2</button>
                </div>
                <button onclick="playAnnouncement(5)" class="w-full py-4 bg-slate-900 dark:bg-indigo-600 text-white rounded-2xl font-bold uppercase tracking-widest text-xs">Mulai Penyiaran Isya</button>
            </div>
        </div>
    </div>

    <div id="status-bar" class="hidden fixed top-6 left-1/2 -translate-x-1/2 z-50 px-6 py-3 bg-red-600 text-white rounded-full font-bold shadow-xl items-center gap-3">
        <span class="w-2 h-2 bg-white rounded-full animate-ping"></span> MEREKAM (Studio Processing Active)
    </div>

    <script>
        const surahNames = ["Al-Fatihah", "Al-Baqarah", "Ali 'Imran", "An-Nisa'", "Al-Ma'idah", "Al-An'am", "Al-A'raf", "Al-Anfal", "At-Tawbah", "Yunus", "Hud", "Yusuf", "Ar-Ra'd", "Ibrahim", "Al-Hijr", "An-Nahl", "Al-Isra'", "Al-Kahf", "Maryam", "Ta-Ha", "Al-Anbiya'", "Al-Hajj", "Al-Mu'minun", "An-Nur", "Al-Furqan", "Ash-Shu'ara'", "An-Naml", "Al-Qasas", "Al-'Ankabut", "Ar-Rum", "Luqman", "As-Sajdah", "Al-Ahzab", "Saba'", "Fatir", "Ya-Sin", "As-Saffat", "Sad", "Az-Zumar", "Ghafir", "Fussilat", "Ash-Shura", "Az-Zukhruf", "Ad-Dukhan", "Al-Jathiyah", "Al-Ahqaf", "Muhammad", "Al-Fath", "Al-Hujurat", "Qaf", "Adh-Dhariyat", "At-Tur", "An-Najm", "Al-Qamar", "Ar-Rahman", "Al-Waqi'ah", "Al-Hadid", "Al-Mujadilah", "Al-Hashr", "Al-Mumtahanah", "As-Saff", "Al-Jumu'ah", "Al-Munafiqun", "At-Taghabun", "At-Talaq", "At-Tahrim", "Al-Mulk", "Al-Qalam", "Al-Haqqah", "Al-Ma'arij", "Nuh", "Al-Jinn", "Al-Muzzammil", "Al-Muddaththir", "Al-Qiyamah", "Al-Insan", "Al-Mursalat", "An-Naba'", "An-Nazi'at", "'Abasa", "At-Takwir", "Al-Infitar", "Al-Mutaffifin", "Al-Inshiqaq", "Al-Buruj", "At-Tariq", "Al-A'la", "Al-Ghashiyah", "Al-Fajr", "Al-Balad", "Ash-Shams", "Al-Layl", "Ad-Duha", "Ash-Sharh", "At-Tin", "Al-'Alaq", "Al-Qadr", "Al-Bayyinah", "Az-Zalzalah", "Al-'Adiyat", "Al-Qari'ah", "At-Takathur", "Al-'Asr", "Al-Humazah", "Al-Fil", "Quraysh", "Al-Ma'un", "Al-Kawthar", "Al-Kafirun", "An-Nasr", "Al-Masad", "Al-Ikhlas", "Al-Falaq", "An-Nas"];

        let mediaRecorder, audioChunks = [], recordings = {}, isRecording = false;
        let mainStream = null;
        let universalAudio = new Audio();
        let audioCtx, source, compressor, streamDest;
        const gainControl = document.getElementById('gain-control');

        // Populate Surah Select
        const surahSelect = document.getElementById('surah-select');
        surahNames.forEach((name, index) => {
            const opt = document.createElement('option');
            opt.value = index + 1;
            opt.text = `${index + 1}. ${name}`;
            surahSelect.appendChild(opt);
        });

        function loadFromMp3Quran() {
            const qariPath = document.getElementById('qari-select').value;
            let surahNum = document.getElementById('surah-select').value.toString().padStart(3, '0');
            const finalUrl = `https://${qariPath}/${surahNum}.mp3`;
            universalAudio.src = finalUrl;
            document.getElementById('now-playing').innerText = `Surah: ${surahNames[parseInt(surahNum)-1]}`;
            resetPlayerUI();
            toggleUniversalPlayer();
        }

        function toggleUniversalPlayer() {
            if (!universalAudio.src) { loadFromMp3Quran(); return; }
            const icon = document.getElementById('play-icon');
            if (universalAudio.paused) {
                universalAudio.play();
                icon.innerHTML = '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>';
            } else {
                universalAudio.pause();
                icon.innerHTML = '<path d="M8 5v14l11-7z"/>';
            }
        }

        function forwardAudio() { universalAudio.currentTime += 10; }
        function rewindAudio() { universalAudio.currentTime -= 10; }

        universalAudio.ontimeupdate = () => {
            const progress = (universalAudio.currentTime / universalAudio.duration) * 100;
            document.getElementById('progress-bar').style.width = progress + '%';
            document.getElementById('time-current').innerText = formatTime(universalAudio.currentTime);
            if(universalAudio.duration) document.getElementById('time-total').innerText = formatTime(universalAudio.duration);
        };

        function formatTime(secs) {
            if(!secs) return "00:00";
            const mins = Math.floor(secs / 60);
            const s = Math.floor(secs % 60);
            return `${mins.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
        }

        function resetPlayerUI() {
            document.getElementById('progress-bar').style.width = '0%';
            document.getElementById('play-icon').innerHTML = '<path d="M8 5v14l11-7z"/>';
        }

        async function handleStart(id) {
            if (isRecording) return;
            if (!mainStream) mainStream = await navigator.mediaDevices.getUserMedia({ audio: { echoCancellation: true, noiseSuppression: true } });
            audioCtx = new AudioContext();
            source = audioCtx.createMediaStreamSource(mainStream);
            compressor = audioCtx.createDynamicsCompressor();
            compressor.threshold.setValueAtTime(-24, audioCtx.currentTime);
            compressor.ratio.setValueAtTime(12, audioCtx.currentTime);
            streamDest = audioCtx.createMediaStreamDestination();
            source.connect(compressor); compressor.connect(streamDest);
            mediaRecorder = new MediaRecorder(streamDest.stream);
            audioChunks = []; isRecording = true;
            mediaRecorder.ondataavailable = e => audioChunks.push(e.data);
            mediaRecorder.onstop = () => {
                const blob = new Blob(audioChunks, { type: 'audio/wav' });
                recordings[id] = URL.createObjectURL(blob);
                document.getElementById(`btn-rec-${id}`).classList.add('btn-recorded');
                audioCtx.close();
            };
            mediaRecorder.start();
            document.getElementById(`btn-rec-${id}`).classList.add('recording-active');
            document.getElementById('status-bar').classList.replace('hidden', 'flex');
        }

        function handleStop() {
            if (!isRecording || !mediaRecorder) return;
            mediaRecorder.stop(); isRecording = false;
            document.querySelectorAll('[id^="btn-rec-"]').forEach(b => b.classList.remove('recording-active'));
            document.getElementById('status-bar').classList.replace('flex', 'hidden');
        }

        function updateClock() {
            const now = new Date();
            document.getElementById('realtime-clock').innerText = now.toLocaleTimeString('id-ID', {hour12:false}).replace(/\./g,':');
            document.getElementById('realtime-day').innerText = now.toLocaleDateString('id-ID', { weekday: 'long', day: 'numeric', month: 'long' });
        }
        setInterval(updateClock, 1000); updateClock();

        async function fetchSlemanTimes() {
            try {
                const res = await fetch(`https://api.aladhan.com/v1/timingsByCity?city=Sleman&country=Indonesia&method=11`);
                const data = await res.json();
                const t = data.data.timings;
                const list = [{n:'Subuh', v:t.Fajr}, {n:'Dzuhur', v:t.Dhuhr}, {n:'Ashar', v:t.Asr}, {n:'Maghrib', v:t.Maghrib}, {n:'Isya', v:t.Isha}];
                document.getElementById('sholat-container').innerHTML = list.map(s => `
                    <div class="bg-slate-50 dark:bg-slate-800/50 p-3 rounded-2xl text-center border border-slate-100 dark:border-slate-700">
                        <p class="text-[9px] font-bold opacity-50 uppercase">${s.n}</p>
                        <p class="text-sm font-black">${s.v}</p>
                    </div>`).join('');
            } catch (e) {}
        }
        fetchSlemanTimes();

        function toggleDarkMode() { document.documentElement.classList.toggle('dark'); }

        const templates = {
            subuh: 'pembuka_subuh.mp3', dzuhur_q: 'pembuka_dzuhur_q.mp3', dzuhur_b: 'pembuka_dzuhur_b.mp3',
            ashar_1: 'pembuka_ashar_1.mp3', ashar_2: 'pembuka_ashar_2.mp3', hajat_1: 'pembuka_hajat_1.mp3',
            hajat_2: 'pembuka_hajat_2.mp3', isya_q1: 'pembuka_isya_q1.mp3', isya_q2: 'pembuka_isya_q2.mp3',
            isya_b1: 'pembuka_isya_b1.mp3', isya_b2: 'pembuka_isya_b2.mp3', penutup: 'penutup.mp3'
        };

        function playAudio(url, isRecordingFile = false) {
            return new Promise((resolve) => {
                const audio = new Audio(url);
                if (isRecordingFile) audio.volume = Math.min(parseFloat(gainControl.value), 1.0);
                audio.onended = resolve; audio.onerror = resolve; audio.play();
            });
        }

        async function playAnnouncement(session) {
            const btns = document.querySelectorAll('button');
            btns.forEach(b => b.disabled = true);
            try {
                if (session === 1) {
                    await playAudio(templates.subuh);
                    if(recordings['subuh']) await playAudio(recordings['subuh'], true);
                    await playAudio(templates.penutup);
                } else if (session === 2) {
                    await playAudio(templates.dzuhur_q);
                    if(recordings['dzuhur-q']) await playAudio(recordings['dzuhur-q'], true);
                    await playAudio(templates.dzuhur_b);
                    if(recordings['dzuhur-b']) await playAudio(recordings['dzuhur-b'], true);
                    await playAudio(templates.penutup);
                } else if (session === 3) {
                    await playAudio(templates.ashar_1);
                    if(recordings['ashar-1']) await playAudio(recordings['ashar-1'], true);
                    await playAudio(templates.ashar_2);
                    if(recordings['ashar-2']) await playAudio(recordings['ashar-2'], true);
                    await playAudio(templates.penutup);
                } else if (session === 4) {
                    await playAudio(templates.hajat_1);
                    if(recordings['hajat-1']) await playAudio(recordings['hajat-1'], true);
                    await playAudio(templates.hajat_2);
                    if(recordings['hajat-2']) await playAudio(recordings['hajat-2'], true);
                    await playAudio(templates.penutup);
                } else if (session === 5) {
                    await playAudio(templates.isya_q1);
                    if(recordings['isya-q1']) await playAudio(recordings['isya-q1'], true);
                    await playAudio(templates.isya_q2);
                    if(recordings['isya-q2']) await playAudio(recordings['isya-q2'], true);
                    await playAudio(templates.isya_b1);
                    if(recordings['isya-b1']) await playAudio(recordings['isya-b1'], true);
                    await playAudio(templates.isya_b2);
                    if(recordings['isya-b2']) await playAudio(recordings['isya-b2'], true);
                    await playAudio(templates.penutup);
                }
            } finally { btns.forEach(b => b.disabled = false); }
        }
    </script>
</body>
</html>